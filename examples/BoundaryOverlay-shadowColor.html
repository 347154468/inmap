<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        #allmap {
            width: 100%;
            height: 100%;
        }

        #app {
            position: fixed;
            top: 0px;
            left: 0px;
            width: 100%;
            background-color: #fff;
            z-index: 99999;
            padding: 5px 20px;
        }

        .geo-modal {}
    </style>
    <script>
        window.TD = {
            config: {
                apiPath: 'http://localhost:3000',
                workerPath: 'http://localhost:8088/lib/worker.js'
            }
        };
    </script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=0lPULNZ5PmrFVg76kFuRjezF"></script>
    <script type="text/javascript" src="http://huiyan.baidu.com/mapv/demo/js/lib/BaiduMap_cityCenter.js"></script>
    <script src="./lib/vue.js"></script>
    <script src="./data/shenzhen.js"></script>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="../../lib/inmap.style.css" class="src">
    <script src="../../lib/inmap.js"></script>
</head>
</head>
<title></title>
</head>

<body>

    <div id="allmap"></div>
    <div style="position:absolute;top:0; width:100%;z-index:9999" id='app'>
        <button type="button" class="btn btn-default" @click='wiriteClick'> 白色主题</button>
        <button type="button" class="btn btn-primary" @click='blueClick'>蓝色主题 </button>
        <div>

</body>

</html>
<script>
    var inMapVue = new Vue({
        el: '#app',
        data: {
        },
        watch: {

        },
        methods: {
            wiriteClick: function () {
                overlay.setOptionStyle(skin2);
            },
            blueClick: function () {
                overlay.setOptionStyle(skin1);
            }
        },
        mounted: function () {

        }
    })

    var inmap = new inmap.Map({
        id: 'allmap',
        zoom: {
            value:15,
            show: true,
            max: 22
        }
    })

    var skin1 = {
        skin: "Blueness",
        tooltip: {
            show: true,
            position: 'top',
            //   formatter: "{name}~{count}",
            formatter: function (params) {
                return `${params.name}-设备数量：${params.count}<br/>
                         ${params.name}-人口密度：${params.count}<br/>
                        `

            }
        },
        legend: {
            show: true,
            title: "板块去重设备数 "
        },
        label: {
            show: true, // 是否显示
            font: "13px bold ",
            color: "rgba(75,80,86,1)",
            selected: {
                color: "rgba(255,255,255,1)"
            }
        },
        style: {
            normal: {
                borderWidth: 0.3,
                borderColor: 'rgba(0, 0, 0, 0.2)'
            },
            mouseOver: {
                shadowColor: 'rgba(0, 0, 0, 1)',
                shadowBlur: 20,
                borderWidth: 1,
            },
            selected: {
                backgroundColor: 'rgba(184,0,0,1)',
                borderColor: "rgba(255,255,255,1)"
            },
            colors: [
                "rgba(156,200,249,0.7)", "rgba(93,158,247,0.7)",
                "rgba(134,207,55,0.7)",
                "rgba(252,198,10,0.7)", "rgba(255,144,0,0.7)", "rgba(255,72,0,0.7)",
                "rgba(255,0,0,0.7)"
            ]
        },
        data: [],
        multiSelect: false, //是否支持多选
        event: {
            onMouseClick: function (item) {
                console.log(item);
                //能获取当前点的信息
            }
        }
    };
    var skin2 = {

        skin: "WhiteLover",
        tooltip: {
            show: true,
            position: 'top',
            formatter: "{name}~{count}",
            // formatter: function (params) {
            //     return params.count;
            // }
        },
        legend: {
            show: true,
            title: "板块去重设备数 "
        },
        label: {
            show: true, // 是否显示
            font: "13px bold ",
            color: "rgba(75,80,86,1)",
            selected: {
                color: "rgba(255,255,255,1)"
            }
        },
        style: {
            normal: {
                borderWidth: 0.3,
                borderColor: 'rgba(0, 0, 0, 0.2)'
            },
            mouseOver: {
                shadowColor: 'rgba(0, 0, 0, 1)',
                shadowBlur: 20,
                borderWidth: 1,
            },
            selected: {
                backgroundColor: 'rgba(184,0,0,1)',
                borderColor: "rgba(255,255,255,1)"
            },
            "colors": [
                "#2d8cf0",
                "#2de2c5",
                "#fcc45f",
                "#ff8454",
                "#db425a",
                "#34508c",
                "#5bb6fd"
            ],

        },
        data: [],
        multiSelect: false, //是否支持多选
        event: {
            onMouseClick: function (item) {
                console.log(item);
                //能获取当前点的信息
            }
        }
    };


    // inmap.map.centerAndZoom(new BMap.Point("114.16248337214269", "22.559515429553684"), 11); // 初始化地图,设置中心点坐标和地图级别
    var overlay = new inmap.BoundaryOverlay(skin1);
    inmap.add(overlay);
    overlay.setPoints(data);
    // debugger
    let point = inmap.map.getCenter();

    for (let i = 0; i < data.length; i++) {
        if (inmap.utils.isPolyContainsPt(point.lng, point.lat, data[i].geo)) {
            
        };

    }
    // debugger 

    // debugger
    // overlay.setSelectd("name=='石岩'", true)
    // setTimeout(function (inmap,ov) {
    //     // debugger
    //     inmap.remove(ov);
    // }, 2000, inmap,overlay)
</script>